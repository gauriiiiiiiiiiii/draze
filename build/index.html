<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Draze</title><style>body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";background:#f0f2f5;display:flex;flex-direction:column;height:100vh;overflow:hidden;color:#333}.header-bar{min-height:48px;font-size:1.1rem;font-weight:500;color:#fff;background-image:linear-gradient(135deg,#667eea 0,#764ba2 100%);display:flex;align-items:center;justify-content:space-between;padding:0 20px;box-shadow:0 2px 5px rgba(0,0,0,.15);flex-shrink:0}.header-bar .title-group{display:flex;align-items:center;gap:12px}.header-bar .logo{filter:invert(1)}.manual-btn{padding:6px 12px;font-size:.85rem;border-radius:6px;background-color:rgba(255,255,255,.2);color:#fff;border:1px solid rgba(255,255,255,.3);cursor:pointer;transition:background-color .2s ease}.manual-btn:hover{background-color:rgba(255,255,255,.3)}.app-body{display:flex;flex-grow:1;overflow:hidden}.sidebar{width:300px;min-width:280px;padding:16px;background-color:#fff;overflow-y:auto;border-right:1px solid #d1d5db;flex-shrink:0;display:flex;flex-direction:column;gap:20px}.sidebar-section .head-label{font-weight:600;font-size:.95rem;font-family:inherit;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #e5e7eb;color:#4b5563}.sidebar label{display:block;margin-top:12px;margin-bottom:6px;font-size:.8rem;font-weight:500;color:#6b7280}.sidebar .color-chooser-btn,.sidebar input[type=number],.sidebar input[type=range],.sidebar input[type=text],.sidebar select{width:100%;padding:8px 10px;border-radius:6px;border:1px solid #d1d5db;margin-bottom:10px;box-sizing:border-box;font-size:.9rem;transition:border-color .2s ease,box-shadow .2s ease}.sidebar input:focus,.sidebar select:focus{border-color:#4f46e5;box-shadow:0 0 0 3px rgba(79,70,229,.1);outline:0}.sidebar input[type=range]{padding-left:0;padding-right:0}.coordinate-display-sidebar{margin-top:10px;font-size:.85rem}.coordinate-display-sidebar span{display:block;padding:3px 0;font-weight:400;color:#374151}.range-value-display{font-weight:500;color:#4f46e5}.main-content-area{flex-grow:1;display:flex;flex-direction:column;overflow:hidden;padding:12px;background-color:#f9fafb}.main-content-area .head-label{font-weight:600;font-size:1rem;color:#374151;margin-bottom:10px;text-align:center;padding:8px;background-color:#e5e7eb;border-radius:6px}.canvas-code-container{flex-grow:1;display:flex;overflow:hidden;gap:12px}.canvas-column{flex:3;display:flex;justify-content:center;align-items:center;padding:0;overflow:auto;background-color:#fff;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,.05)}#visualizerCanvas{border:1px solid #e5e7eb;max-width:100%;max-height:100%;border-radius:6px;display:block}.code-preview-column{flex:2;display:flex;flex-direction:column;padding:10px;background-color:#fff;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,.05)}.code-preview-column .head-label-small{font-weight:500;font-size:.9rem;margin-bottom:8px;color:#4b5563;text-align:center}#codePreviewArea{flex-grow:1;width:100%;font-family:SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:.8rem;border:1px solid #e5e7eb;padding:10px;box-sizing:border-box;white-space:pre;overflow:auto;background-color:#f9fafb;border-radius:6px;color:#1f2937}.bottom-bar{background-image:linear-gradient(135deg,#667eea 0,#764ba2 100%);padding:10px 20px;display:grid;grid-template-columns:1fr auto 1fr;align-items:center;min-height:40px;box-shadow:0 -2px 5px rgba(0,0,0,.1);flex-shrink:0;gap:10px}.bottom-bar-section{display:flex;gap:8px}.bottom-bar-section.left{justify-content:flex-start}.bottom-bar-section.center{justify-content:center}.bottom-bar-section.right{justify-content:flex-end}.btn{padding:8px 16px;border-radius:6px;border:none;cursor:pointer;font-weight:500;font-size:.85rem;transition:background-color .2s ease,transform .1s ease;color:#fff;text-shadow:0 1px 1px rgba(0,0,0,.1)}.btn:focus{outline:2px solid transparent;outline-offset:2px;box-shadow:0 0 0 3px rgba(255,255,255,.5)}.btn:active{transform:translateY(1px)}.draw-btn{background-color:#10b981}.draw-btn:hover{background-color:#059669}.clear-btn{background-color:#ef4444}.clear-btn:hover{background-color:#dc2626}.redo-btn,.undo-btn{background-color:#f59e0b}.redo-btn:hover,.undo-btn:hover{background-color:#d97706}.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.5);backdrop-filter:blur(4px)}.modal-content{background-color:#fff;margin:10% auto;padding:24px;border:1px solid #d1d5db;width:90%;max-width:600px;border-radius:8px;box-shadow:0 10px 25px rgba(0,0,0,.15)}.modal-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #e5e7eb;padding-bottom:12px;margin-bottom:16px}.modal-title{font-size:1.2rem;font-weight:600;color:#1f2937}.modal-close-btn{font-size:1.5rem;font-weight:700;cursor:pointer;border:none;background:0 0;color:#9ca3af}.modal-close-btn:hover{color:#6b7280}.modal-body{font-size:.9rem;line-height:1.6;color:#374151}.modal-body h4{font-size:1rem;font-weight:600;margin-top:16px;margin-bottom:8px;color:#111827}.modal-body ol,.modal-body ul{padding-left:20px;margin-bottom:16px}.modal-body li{margin-bottom:6px}</style><script defer="defer" src="/static/js/main.cac191f9.js"></script><link href="/static/css/main.dd5d815d.css" rel="stylesheet"></head><body><header class="header-bar"><div class="title-group"><svg class="logo" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/><path d="M2 17L12 22L22 17" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/><path d="M2 12L12 17L22 12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/></svg> <span>Draze</span></div><button id="userManualBtn" class="manual-btn">User Manual</button></header><div class="app-body"><aside class="sidebar"><div class="sidebar-section" id="tools-section"><div class="head-label">TOOLS</div><label for="shape-selector">Select Shape:</label> <select id="shape-selector"></select><div id="dynamic-inputs"></div></div><div class="sidebar-section" id="toolbar-section"><div class="head-label">INFO & PROPERTIES</div><div class="coordinate-display-sidebar"><span id="x-coord-sidebar">X: --</span> <span id="y-coord-sidebar">Y: --</span></div><label for="color-picker">Choose Colour:</label> <input type="color" id="color-picker" class="color-chooser-btn" value="#4f46e5"> <label for="line-width">Choose Width: <span id="line-width-value" class="range-value-display">2.0</span></label> <input type="range" id="line-width" min="1" max="10" step="0.5" value="2.0"></div></aside><main class="main-content-area"><div class="head-label">CANVAS</div><div class="canvas-code-container"><section class="canvas-column"><canvas id="visualizerCanvas" width="600" height="450"></canvas></section><section class="code-preview-column"><div class="head-label-small">Figure Data (JSON)</div><textarea id="codePreviewArea" readonly="readonly" placeholder="Drawn figures data will appear here..."></textarea></section></div></main></div><footer class="bottom-bar"><div class="bottom-bar-section left"><button id="draw-button" class="btn draw-btn">Draw (Ctrl+D)</button></div><div class="bottom-bar-section center"><button id="undo-button" class="btn undo-btn">Undo (Ctrl+Z)</button> <button id="redo-button" class="btn redo-btn">Redo (Ctrl+Y)</button></div><div class="bottom-bar-section right"><button id="clear-button" class="btn clear-btn">Clear (Ctrl+C)</button></div></footer><div id="userManualModal" class="modal"><div class="modal-content"><div class="modal-header"><span class="modal-title">User Manual</span> <button id="modalCloseBtn" class="modal-close-btn">&times;</button></div><div class="modal-body"><p>Welcome to Draze! This tool allows you to draw various geometric shapes on a canvas.</p><h4>Keyboard Shortcuts:</h4><ul><li><strong>Ctrl + D:</strong> Draw the selected figure.</li><li><strong>Ctrl + Z:</strong> Undo the last action.</li><li><strong>Ctrl + Y:</strong> Redo the last undone action.</li><li><strong>Ctrl + C:</strong> Clear all figures from the canvas.</li></ul><h4>Basic Usage:</h4><ol><li>Select a figure type from the "Select Shape" dropdown in the "TOOLS" panel.</li><li>Enter the required dimensions for the selected shape.</li><li>Choose a color and line thickness.</li><li>Click "Draw" or press Ctrl+D.</li></ol><p style="margin-top:16px;font-size:.8rem;text-align:center;color:#6b7280">Happy Drawing!</p></div></div></div><script>let canvas,ctx,canvasCenterX,canvasCenterY,figures=[],redoStack=[],selectedColor="#4f46e5",selectedLineWidth=2,canvasWidth=600,canvasHeight=450;const gridSpacing=20;let shapeSelector,dynamicInputsContainer,colorPicker,lineWidthInput,lineWidthValueDisplay,drawButton,clearButton,undoButton,redoButton,xCoordSidebarDisplay,yCoordSidebarDisplay,codePreviewArea,userManualBtn,userManualModal,modalCloseBtn;const shapeDefinitions={select:{text:"Select Figure...",params:[]},point:{text:"POINT",params:[{name:"x",label:"X:",placeholder:"x-coordinate"},{name:"y",label:"Y:",placeholder:"y-coordinate"}]},line:{text:"LINE",params:[{name:"x1",label:"X1:",placeholder:"x1-coordinate"},{name:"y1",label:"Y1:",placeholder:"y1-coordinate"},{name:"x2",label:"X2:",placeholder:"x2-coordinate"},{name:"y2",label:"Y2:",placeholder:"y2-coordinate"}]},arc:{text:"ARC",params:[{name:"centerX",label:"Center X:",placeholder:"x-coord of center"},{name:"centerY",label:"Center Y:",placeholder:"y-coord of center"},{name:"radius",label:"Radius (R):",placeholder:"Radius of arc"},{name:"startAngle",label:"Start Angle (A1):",placeholder:"Angle1 in degrees"},{name:"endAngle",label:"End Angle (A2):",placeholder:"Angle2 in degrees"}]},circle:{text:"CIRCLE",params:[{name:"centerX",label:"Center X:",placeholder:"x-coordinate"},{name:"centerY",label:"Center Y:",placeholder:"y-coordinate"},{name:"radius",label:"Radius (R):",placeholder:"Radius"}]},triangle:{text:"TRIANGLE",params:[{name:"x1",label:"X1:",placeholder:"x1-coordinate"},{name:"y1",label:"Y1:",placeholder:"y1-coordinate"},{name:"x2",label:"X2:",placeholder:"x2-coordinate"},{name:"y2",label:"Y2:",placeholder:"y2-coordinate"},{name:"x3",label:"X3:",placeholder:"x3-coordinate"},{name:"y3",label:"Y3:",placeholder:"y3-coordinate"}]},rectangle:{text:"RECTANGLE",params:[{name:"centerX",label:"Center X:",placeholder:"x-coord of center"},{name:"centerY",label:"Center Y:",placeholder:"y-coord of center"},{name:"width",label:"Width (W):",placeholder:"Width"},{name:"height",label:"Height (H):",placeholder:"Height"}]},ellipse:{text:"ELLIPSE",params:[{name:"centerX",label:"Center X:",placeholder:"x-coord of center"},{name:"centerY",label:"Center Y:",placeholder:"y-coord of center"},{name:"radiusX",label:"Radius X (Lx):",placeholder:"Horizontal radius"},{name:"radiusY",label:"Radius Y (Ly):",placeholder:"Vertical radius"}]},h_parabola:{text:"HORIZONTAL PARABOLA",params:[{name:"focusX",label:"Focus X (Fx):",placeholder:"x-coord of focus"},{name:"focusY",label:"Focus Y (Fy):",placeholder:"y-coord of focus"},{name:"latusRectum",label:"Latus Rectum (LR):",placeholder:"Length of Latus Rectum"}]},v_parabola:{text:"VERTICAL PARABOLA",params:[{name:"focusX",label:"Focus X (Fx):",placeholder:"x-coord of focus"},{name:"focusY",label:"Focus Y (Fy):",placeholder:"y-coord of focus"},{name:"latusRectum",label:"Latus Rectum (LR):",placeholder:"Length of Latus Rectum"}]},h_hyperbola:{text:"HORIZONTAL HYPERBOLA",params:[{name:"centerX",label:"Center X:",placeholder:"x-coord of center"},{name:"centerY",label:"Center Y:",placeholder:"y-coord of center"},{name:"aAxis",label:"Transverse Axis (a):",placeholder:"Distance center to transverse axis"},{name:"bAxis",label:"Conjugate Axis (b):",placeholder:"Distance center to conjugate axis"}]},v_hyperbola:{text:"VERTICAL HYPERBOLA",params:[{name:"centerX",label:"Center X:",placeholder:"x-coord of center"},{name:"centerY",label:"Center Y:",placeholder:"y-coord of center"},{name:"aAxis",label:"Transverse Axis (a):",placeholder:"Distance center to transverse axis"},{name:"bAxis",label:"Conjugate Axis (b):",placeholder:"Distance center to conjugate axis"}]},cycloid:{text:"CYCLOID",params:[{name:"startX",label:"Start X:",placeholder:"x-coord of start point"},{name:"startY",label:"Start Y:",placeholder:"y-coord of start point"},{name:"radius",label:"Radius (R):",placeholder:"Radius of rolling circle"},{name:"revolutions",label:"Revolutions (Rv):",placeholder:"Number of revolutions"}]},epicycloid:{text:"EPICYCLOID",params:[{name:"centerX",label:"Fixed Center X:",placeholder:"x-coord of fixed circle center"},{name:"centerY",label:"Fixed Center Y:",placeholder:"y-coord of fixed circle center"},{name:"revolvingR",label:"Revolving Radius (Rv):",placeholder:"Radius of revolving circle"},{name:"fixedR",label:"Fixed Radius (Rf):",placeholder:"Radius of fixed circle"}]},hypocycloid:{text:"HYPOCYCLOID",params:[{name:"centerX",label:"Fixed Center X:",placeholder:"x-coord of fixed circle center"},{name:"centerY",label:"Fixed Center Y:",placeholder:"y-coord of fixed circle center"},{name:"revolvingR",label:"Revolving Radius (Rv):",placeholder:"Radius of revolving circle"},{name:"fixedR",label:"Fixed Radius (Rf):",placeholder:"Radius of fixed circle"}]},spiral:{text:"SPIRAL",params:[{name:"centerX",label:"Center X:",placeholder:"x-coord of center"},{name:"centerY",label:"Center Y:",placeholder:"y-coord of center"},{name:"radiusFactor",label:"Radius Factor (R):",placeholder:"Expansion factor per turn"},{name:"turns",label:"Turns (T):",placeholder:"Number of turns"}]},mirror_image:{text:"MIRROR IMAGE (Point)",params:[{name:"pointX",label:"Point X:",placeholder:"x-coord of point"},{name:"pointY",label:"Point Y:",placeholder:"y-coord of point"},{name:"lineM",label:"Line Slope (m):",placeholder:"Slope of line (y=mx+c)"},{name:"lineC",label:"Line Intercept (c):",placeholder:"Y-intercept (y=mx+c)"}]}};function updateCanvasCenter(){canvasCenterX=canvas.width/2,canvasCenterY=canvas.height/2}function updateDynamicInputs(){dynamicInputsContainer.innerHTML="";const e=shapeSelector.value,t=shapeDefinitions[e];t&&t.params.length>0&&t.params.forEach(e=>{const t=document.createElement("label");t.htmlFor=`input-${e.name}`,t.textContent=e.label;const a=document.createElement("input");a.type="number",a.id=`input-${e.name}`,a.name=e.name,a.placeholder=e.placeholder,a.value=e.name.includes("radius")||e.name.includes("Radius")||e.name.includes("width")||e.name.includes("height")||e.name.includes("latus")||e.name.includes("revolutions")||"fixedR"===e.name||e.name.includes("Axis")?50:"revolvingR"===e.name?20:e.name.includes("turns")||e.name.includes("Factor")?2:"endAngle"===e.name?90:0,dynamicInputsContainer.appendChild(t),dynamicInputsContainer.appendChild(a)})}function showCustomMessage(e,t,a="info"){const n=document.querySelector(".custom-message-box");n&&document.body.removeChild(n);const o=document.createElement("div");o.className=`custom-message-box ${a}`,o.innerHTML=`<strong style="display:block; margin-bottom: 5px;">${e}</strong> ${t}`,document.body.appendChild(o),setTimeout(()=>{o.classList.add("show")},10),setTimeout(()=>{o.classList.remove("show"),setTimeout(()=>document.body.removeChild(o),500)},3500)}function handleDraw(){const e=shapeSelector.value;if("select"===e)return void showCustomMessage("Selection Needed","Please select a figure to draw.","info");const t=document.querySelectorAll("#dynamic-inputs input"),a={};let n=!0;if(t.forEach(e=>{(""===e.value.trim()||isNaN(parseFloat(e.value)))&&(n=!1),a[e.name]=parseFloat(e.value)}),!n)return void showCustomMessage("Invalid Input","Please ensure all fields have valid numbers.","error");const o={type:e,params:a,color:selectedColor,lineWidth:selectedLineWidth};figures.push(o),redoStack=[],redrawCanvasAndPreview()}function handleClear(){figures=[],redoStack=[],redrawCanvasAndPreview()}function handleUndo(){figures.length>0&&(redoStack.push(figures.pop()),redrawCanvasAndPreview())}function handleRedo(){redoStack.length>0&&(figures.push(redoStack.pop()),redrawCanvasAndPreview())}function redrawCanvasAndPreview(){redrawCanvas(),updateCodePreview()}function updateCodePreview(){codePreviewArea.value=figures.length>0?JSON.stringify(figures,null,2):"",codePreviewArea.placeholder=figures.length>0?"":"Drawn figures data will appear here..."}function drawGridAndAxes(){ctx.save(),ctx.strokeStyle="#e9ecef",ctx.lineWidth=.5;for(let e=canvasCenterX%20;e<=canvasWidth;e+=20)ctx.beginPath(),ctx.moveTo(e,0),ctx.lineTo(e,canvasHeight),ctx.stroke();for(let e=canvasCenterY%20;e<=canvasHeight;e+=20)ctx.beginPath(),ctx.moveTo(0,e),ctx.lineTo(canvasWidth,e),ctx.stroke();ctx.strokeStyle="#adb5bd",ctx.lineWidth=1.5;ctx.beginPath(),ctx.moveTo(canvasCenterX,0),ctx.lineTo(canvasCenterX,canvasHeight),ctx.stroke(),drawArrowHead(ctx,canvasCenterX,8,canvasCenterX,0,8),ctx.beginPath(),ctx.moveTo(0,canvasCenterY),ctx.lineTo(canvasWidth,canvasCenterY),ctx.stroke(),drawArrowHead(ctx,canvasWidth-8,canvasCenterY,canvasWidth,canvasCenterY,8),ctx.restore()}function drawArrowHead(e,t,a,n,o,c){const l=Math.atan2(o-a,n-t);e.save(),e.beginPath(),e.lineWidth=1.5,e.moveTo(n,o),e.lineTo(n-c*Math.cos(l-Math.PI/6),o-c*Math.sin(l-Math.PI/6)),e.moveTo(n,o),e.lineTo(n-c*Math.cos(l+Math.PI/6),o-c*Math.sin(l+Math.PI/6)),e.stroke(),e.restore()}function redrawCanvas(){ctx&&(ctx.clearRect(0,0,canvasWidth,canvasHeight),ctx.fillStyle="#FFFFFF",ctx.fillRect(0,0,canvasWidth,canvasHeight),drawGridAndAxes(),figures.forEach(e=>{ctx.save(),ctx.strokeStyle=e.color,ctx.fillStyle=e.color,ctx.lineWidth=e.lineWidth;const t=e.params,a=(e,t)=>({x:canvasCenterX+e,y:canvasCenterY-t}),n=e=>e*Math.PI/180;switch(e.type){case"point":{const n=a(t.x,t.y);ctx.beginPath(),ctx.arc(n.x,n.y,Math.max(2,e.lineWidth/2),0,2*Math.PI),ctx.fill();break}case"line":{const e=a(t.x1,t.y1),n=a(t.x2,t.y2);ctx.beginPath(),ctx.moveTo(e.x,e.y),ctx.lineTo(n.x,n.y),ctx.stroke();break}case"circle":{const e=a(t.centerX,t.centerY);ctx.beginPath(),ctx.arc(e.x,e.y,t.radius,0,2*Math.PI),ctx.stroke();break}case"rectangle":{const e=a(t.centerX-t.width/2,t.centerY+t.height/2);ctx.strokeRect(e.x,e.y,t.width,t.height);break}case"ellipse":{const e=a(t.centerX,t.centerY);ctx.beginPath(),ctx.ellipse(e.x,e.y,t.radiusX,t.radiusY,0,0,2*Math.PI),ctx.stroke();break}case"triangle":{const e=a(t.x1,t.y1),n=a(t.x2,t.y2),o=a(t.x3,t.y3);ctx.beginPath(),ctx.moveTo(e.x,e.y),ctx.lineTo(n.x,n.y),ctx.lineTo(o.x,o.y),ctx.closePath(),ctx.stroke();break}case"arc":{const e=a(t.centerX,t.centerY);ctx.beginPath(),ctx.arc(e.x,e.y,t.radius,-n(t.endAngle),-n(t.startAngle)),ctx.stroke();break}case"h_parabola":{const e=t.latusRectum/4,n=t.focusX-e,o=t.focusY;ctx.beginPath();for(let t=-canvasHeight/2;t<=canvasHeight/2;t++){const c=a(n+t*t/(4*e),o+t);t===-canvasHeight/2?ctx.moveTo(c.x,c.y):ctx.lineTo(c.x,c.y)}ctx.stroke();break}case"v_parabola":{const e=t.latusRectum/4,n=t.focusX,o=t.focusY-e;ctx.beginPath();for(let t=-canvasWidth/2;t<=canvasWidth/2;t++){const c=a(n+t,o+t*t/(4*e));t===-canvasWidth/2?ctx.moveTo(c.x,c.y):ctx.lineTo(c.x,c.y)}ctx.stroke();break}case"h_hyperbola":{const{centerX:e,centerY:n,aAxis:o,bAxis:c}=t;if(o<=0||c<=0)break;ctx.beginPath();for(let t=-canvasHeight/2;t<=canvasHeight/2;t++){const l=n+t,r=a(e+o*Math.sqrt(1+t*t/(c*c)),l);t===-canvasHeight/2?ctx.moveTo(r.x,r.y):ctx.lineTo(r.x,r.y)}for(let t=canvasHeight/2;t>=-canvasHeight/2;t--){const l=n+t,r=a(e-o*Math.sqrt(1+t*t/(c*c)),l);ctx.lineTo(r.x,r.y)}ctx.stroke();break}case"v_hyperbola":{const{centerX:e,centerY:n,aAxis:o,bAxis:c}=t;if(o<=0||c<=0)break;ctx.beginPath();for(let t=-canvasWidth/2;t<=canvasWidth/2;t++){const l=a(e+t,n+o*Math.sqrt(1+t*t/(c*c)));t===-canvasWidth/2?ctx.moveTo(l.x,l.y):ctx.lineTo(l.x,l.y)}for(let t=canvasWidth/2;t>=-canvasWidth/2;t--){const l=a(e+t,n-o*Math.sqrt(1+t*t/(c*c)));ctx.lineTo(l.x,l.y)}ctx.stroke();break}case"cycloid":{const{startX:e,startY:n,radius:o,revolutions:c}=t;if(o<=0)break;ctx.beginPath();const l=2*c*Math.PI;for(let t=0;t<=l;t+=.01){const c=a(e+o*(t-Math.sin(t)),n+o*(1-Math.cos(t)));0===t?ctx.moveTo(c.x,c.y):ctx.lineTo(c.x,c.y)}ctx.stroke();break}case"epicycloid":{const{centerX:e,centerY:n,revolvingR:o,fixedR:c}=t;if(o<=0||c<=0)break;ctx.beginPath();for(let t=0;t<=2*Math.PI*o;t+=.01){const l=a(e+(c+o)*Math.cos(t)-o*Math.cos((c+o)*t/o),n+(c+o)*Math.sin(t)-o*Math.sin((c+o)*t/o));0===t?ctx.moveTo(l.x,l.y):ctx.lineTo(l.x,l.y)}ctx.stroke();break}case"hypocycloid":{const{centerX:e,centerY:n,revolvingR:o,fixedR:c}=t;if(o<=0||c<=0||o>=c)break;ctx.beginPath();for(let t=0;t<=2*Math.PI*o;t+=.01){const l=a(e+(c-o)*Math.cos(t)+o*Math.cos((c-o)*t/o),n+(c-o)*Math.sin(t)-o*Math.sin((c-o)*t/o));0===t?ctx.moveTo(l.x,l.y):ctx.lineTo(l.x,l.y)}ctx.stroke();break}case"spiral":{const{centerX:e,centerY:n,radiusFactor:o,turns:c}=t;ctx.beginPath();const l=2*c*Math.PI;for(let t=0;t<=l;t+=.01){const c=o*t/(2*Math.PI),l=a(e+c*Math.cos(t),n+c*Math.sin(t));0===t?ctx.moveTo(l.x,l.y):ctx.lineTo(l.x,l.y)}ctx.stroke();break}case"mirror_image":{const{pointX:n,pointY:o,lineM:c,lineC:l}=t,r=a(n,o);ctx.save(),ctx.fillStyle="rgba(128,128,128,0.7)",ctx.beginPath(),ctx.arc(r.x,r.y,Math.max(2,e.lineWidth/2+1),0,2*Math.PI),ctx.fill();const i=-canvasWidth,s=canvasWidth,d=c*s+l,h=a(i,c*i+l),u=a(s,d);ctx.strokeStyle="rgba(128,128,128,0.5)",ctx.lineWidth=Math.max(1,e.lineWidth/2),ctx.beginPath(),ctx.moveTo(h.x,h.y),ctx.lineTo(u.x,u.y),ctx.stroke(),ctx.restore();const x=(c*n-o+l)/(c*c+1),m=a(n-2*c*x,o+2*x);ctx.beginPath(),ctx.arc(m.x,m.y,Math.max(2,e.lineWidth/2),0,2*Math.PI),ctx.fill();break}}ctx.restore()}))}document.addEventListener("DOMContentLoaded",()=>{canvas=document.getElementById("visualizerCanvas");const e=document.querySelector(".canvas-column");function t(){const t=e.clientWidth-2,a=e.clientHeight-2,n=4/3;let o=t,c=t/n;c>a&&(c=a,o=a*n),canvas.width=o,canvas.height=c,canvasWidth=o,canvasHeight=c,updateCanvasCenter(),redrawCanvasAndPreview()}window.addEventListener("resize",t),ctx=canvas.getContext("2d"),shapeSelector=document.getElementById("shape-selector");for(const e in shapeDefinitions){const t=document.createElement("option");t.value=e,t.textContent=shapeDefinitions[e].text,shapeSelector.appendChild(t)}dynamicInputsContainer=document.getElementById("dynamic-inputs"),colorPicker=document.getElementById("color-picker"),lineWidthInput=document.getElementById("line-width"),lineWidthValueDisplay=document.getElementById("line-width-value"),drawButton=document.getElementById("draw-button"),clearButton=document.getElementById("clear-button"),undoButton=document.getElementById("undo-button"),redoButton=document.getElementById("redo-button"),xCoordSidebarDisplay=document.getElementById("x-coord-sidebar"),yCoordSidebarDisplay=document.getElementById("y-coord-sidebar"),codePreviewArea=document.getElementById("codePreviewArea"),userManualBtn=document.getElementById("userManualBtn"),userManualModal=document.getElementById("userManualModal"),modalCloseBtn=document.getElementById("modalCloseBtn"),shapeSelector.addEventListener("change",()=>updateDynamicInputs()),colorPicker.addEventListener("input",e=>selectedColor=e.target.value),lineWidthInput.addEventListener("input",e=>{selectedLineWidth=parseFloat(e.target.value),lineWidthValueDisplay.textContent=selectedLineWidth.toFixed(1)}),drawButton.addEventListener("click",handleDraw),clearButton.addEventListener("click",handleClear),undoButton.addEventListener("click",handleUndo),redoButton.addEventListener("click",handleRedo),canvas.addEventListener("mousemove",e=>{const t=canvas.getBoundingClientRect(),a=canvas.width/t.width,n=canvas.height/t.height,o=(e.clientX-t.left)*a,c=(e.clientY-t.top)*n,l=o-canvasCenterX,r=canvasCenterY-c;xCoordSidebarDisplay.textContent=`X: ${l.toFixed(0)}`,yCoordSidebarDisplay.textContent=`Y: ${r.toFixed(0)}`}),canvas.addEventListener("mouseleave",()=>{xCoordSidebarDisplay.textContent="X: --",yCoordSidebarDisplay.textContent="Y: --"}),document.addEventListener("keydown",e=>{if(("INPUT"!==document.activeElement.tagName||"number"!==document.activeElement.type||"d"!==e.key.toLowerCase()&&"z"!==e.key.toLowerCase()&&"y"!==e.key.toLowerCase()&&"c"!==e.key.toLowerCase()||e.ctrlKey)&&e.ctrlKey){let t=!1;switch(e.key.toLowerCase()){case"d":handleDraw(),t=!0;break;case"z":handleUndo(),t=!0;break;case"y":handleRedo(),t=!0;break;case"c":handleClear(),t=!0}t&&e.preventDefault()}}),userManualBtn.addEventListener("click",()=>userManualModal.style.display="block"),modalCloseBtn.addEventListener("click",()=>userManualModal.style.display="none"),window.addEventListener("click",e=>{e.target==userManualModal&&(userManualModal.style.display="none")}),lineWidthValueDisplay.textContent=selectedLineWidth.toFixed(1),colorPicker.value=selectedColor,updateDynamicInputs(),t()})</script></body></html>